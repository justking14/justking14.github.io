<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src='./script.js'></script>
  <script src='./Tone.js'></script>
  <link rel='stylesheet' type='text/css' href='./style.css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>JUSTKING-GAMES</title>
</head>
<body>
  

  <div class="fluid-container">
    <div class="blue-back">
    <div class="row">
      <div class="col-md-8 offset-md-2">
        <header>
          <span class="logo">Justking Games</span>
        </header>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 offset-md-3 title-container">
        <h1 class="title-task-text">Justking Games</h1>
        <p class='title-description-text'>Justking Games is a subdivision of Hungry Witches for World Domination.</p>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="watch-video-container">
          <iframe src="https://itch.io/embed/251756" height="167" width="552" frameborder="0"></iframe>
          <iframe frameborder="0" src="https://itch.io/embed/305900?bg_color=000000&amp;fg_color=ffffff" width="552" height="167"></iframe>
                    <iframe src="https://itch.io/embed/228446" height="167" width="552" frameborder="0"></iframe>
          <iframe src="https://itch.io/embed/199839" height="167" width="552" frameborder="0"></iframe>

          <iframe src="https://itch.io/embed/180352" height="167" width="552" frameborder="0"></iframe>
        </div>
      </div>
    </div>

    <div class="row">
        <div class="col-md-12 offset-md-1">
            <img src="plant.gif" alt="Flowers in Chania">
            <img src="rain2.gif" alt="Flowers in Chania">
            <img src="eyeDeath.gif" alt="Flowers in Chania">

            <img src="tv.gif" alt="Flowers in Chania">


            <img src="train2.gif" alt="Flowers in Chania">
            <img src="unicorn1g.gif" alt="Flowers in Chania">

            <img src="scene1g.gif" alt="Flowers in Chania">
            <img src="pig66.gif" alt="Flowers in Chania">
            <img src="p123.gif" alt="Flowers in Chania">


            <iframe width="560" height="315" src="https://www.youtube.com/embed/iKh4mZVZ2GE?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/mKK8ggCoAs8?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/Zq2jjhIHotQ?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
          </div>
      </div>
    </div>

  </div> <!-- END OF FLUID CONTAINER -->
</body>
<main>
    <canvas class="retro" id="game" width="1300" height="3072"></canvas>
</main>
<script>
    //create a synth and connect it to the master output (your speakers)
var synth = new Tone.Synth().toMaster();

//play a middle 'C' for the duration of an 8th note
synth.triggerAttackRelease("C4", "8n");


//pass in some initial values for the filter and filter envelope


function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}



var c=document.getElementById("game");
var ctx=c.getContext("2d");
var gravity = 0.04;
var particles = [];

var width = 1300;
var height = 768*4;

function Particle76(){
        this.sizeX = Math.random()*(height/10);
        this.sizeY = Math.random()*(height/10);

        this.velocity = {x:0, y:0};
        this.position = {x:0, y:0};

        this.toExplode = true;
        this.exploded = false;
        this.fade = false;
        this.alpha = 1.0;
        this.explodeHeight = 0.4 + Math.random()*0.5;
    this.color = getRandomColor()


    this.setPosition = function(pos){
        this.position = pos;
    }
    this.setVelocity = function(vel){
        this.velocity = vel;
    }
    this.update = function(){
        this.position.x+=this.velocity.x;
        this.position.y+=this.velocity.y;

        if(this.toExplode === false){
        this.velocity.y += gravity;
        }

        if(this.fade){
            this.alpha-=0.01;
            if(this.alpha < 0){
                this.alpha = 0
            }
            this.sizeX*=0.99;
        }
    }
    this.draw = function(ctx){
        ctx.globalAlpha = this.alpha

        ctx.fillStyle =this.color
        ctx.fillRect(this.position.x, this.position.y, this.sizeX, this.sizeX)
    }
}

function explode(part){
    console.log("boom")
  const steps = 8 + Math.round(Math.random()*6);;
  const radius = 2 + Math.random()*4;;
  for (var i = 0; i < steps; i++) {
    // get velocity
    var x = radius * Math.cos(2 * Math.PI * i / steps);
    var y = radius * Math.sin(2 * Math.PI * i / steps);
    // add particle
    var particle = new Particle76();
    particle.fade = true;
    particle.toExplode = false;
    particle.color = part.color
    particle.fade = true

    particle.position.x = part.position.x;
    particle.position.y = part.position.y;

    particle.sizeX = part.sizeX

    particle.setVelocity({x: x, y: y});
    particles.push(particle);
  }
}


function launchParticle(){
    var particle = new Particle76()

    particle.setPosition({x: Math.random()*(width), y: height});
    particle.setVelocity({x: -1.5 + Math.random()*10, y: -1.9 + Math.random()*-40});

    //particle.setVelocity({x: 0.0, y: -0.16})
    particles.push(particle)

    setTimeout(launchParticle, 20+Math.random()*60);

}
launchParticle()

function render() {
    requestAnimationFrame(function () {
        render();
                //draw();

            //  runGameLoop();
    });    
    ctx.clearRect(0, 0, width, height);
    ctx.globalAlpha = 1.0
    ctx.fillStyle = "black"
    ctx.fillRect(0,0,width, height)
    for (var i = 0; i < particles.length; i++) {
        particles[i].update();
        if(particles[i].toExplode === true && particles[i].exploded === false){
            if(particles[i].position.y < particles[i].explodeHeight * height){
                particles[i].alpha = 0.0
                particles[i].exploded = true;
                explode(particles[i])
            }
        }

        particles[i].draw(ctx);
    }
}
render()

    </script>


</html>
